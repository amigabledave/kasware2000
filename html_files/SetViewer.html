{% extends "base.html" %}
{% block content %}

<!-- <div class="KSUdisplaySection"> -->
	<!-- Section title -->
	<div class="row">
		<div class="col-xs-12 col-sm-9 col-md-10 col-lg-10"> 
			<div class="SectionTitle"> {{constants['d_SetTitles'][set_name]}}{% if not constants['d_SetTitles'][set_name] %}{{set_name}}{% endif %} </div>	
		</div>
	</div>

	{% for ksu in ksu_set %}

		<div class="row KSUdisplaySection" id="MissionKSU" value="{{ksu.key.id()}}" style="margin-top: 0px; padding-bottom:8px;">

			<div class="col-xs-12" style="padding-left:4px; padding-right:4px;">
				<div class="row" style="min-height: 45px">

					<div class="col-xs-11">

						<div class="row" font-size:14px;">
							<div class="col-xs-11 displaySectionDescription">
								<div>
								{% if ksu.ksu_subtype == 'KAS3' %}	
									<span style="color:blue; font-style:italic; font-weight:bold;"> If:</span> <span style="{% if ksu.is_critical %}color:red; font-weight:bold;{% endif %}"><b>{{ksu.secondary_description}}</b></span><span style="color:blue; font-style:italic; font-weight:bold;"> <br> Reaction:</span>
								{% endif %}

								{% if ksu.ksu_subtype == 'KAS4' %}	
									<span style="color:blue; font-style:italic; font-weight:bold;"> Must avoid:</span> 
								{% endif %}								

								<span style="{% if ksu.is_critical %}color:red;{% endif %}"><span id="is_active" style="{% if not ksu.is_active %}color:#D3D3D3;{% endif %}"><b>{{ksu.description}}</b></span></span>
								
								{% if ksu.ksu_type == 'ImIn' %}
									<br><span style="color:grey; font-style:italic; font-size:13px;">{{ksu.secondary_description}}</span> 
								{% endif %}

								{% if ksu.comments %} <br> <em> --- <span style="font-size:13px;">{{ksu.comments}} </span> --- </em>{% endif %}
								</div>
							</div>		
						</div>

						<div class="row">
							<br>
							<div class="col-xs-{% if ksu.ksu_type == 'RTBG' %}12{% else %}6{% endif %}">
								<label class="displaySectionBulletContent">
									{% if ksu.global_category != 'Unassigned' %}
										{{ksu.global_category}}
									{% else %}
										<br>
									{% endif %}
								<div class="displaySectionBulletContent"> 
									{% if ksu.ksu_subtype %}
										{{constants['d_KsuSubtypes'][ksu.ksu_subtype]}}
									{% else %}
										{{constants['d_KsuTypes'][ksu.ksu_type]}}
									{% endif %}
								</div>
								</label>
							</div>	
						{% if not ksu.in_graveyard %}
							{% for attr in constants['d_SetViewerDetails'][ksu.ksu_subtype]['attributes'] %}
								{% if ksu[attr] %}
								<div class="col-xs-{{constants['d_SetViewerDetails'][ksu.ksu_subtype]['columns'][attr]}}">
									<label class="displaySectionBulletContent"> {{constants['d_SetViewerDetails'][ksu.ksu_subtype]['fields'][attr]}}
									<div class="displaySectionBulletContent">
										<span id="{{attr}}">{{ ksu[attr]}}</span>
									</div></label>
								</div>
								{% endif %}
							{% endfor %}
						{% endif %}
						</div>

								
					</div>
					<form method="post">
					<input type="text" class="form-control hidden" name="ksu_id" value="{{ksu.key.id()}}">

					<div class="col-xs-1">
						<div class="btn-group-vertical pull-right">
						{% if not ksu.in_graveyard %}
							<button type="submit" class="btn btn-default displaySectionVerticalButton" name='action_description' value="EditKSU">
							  	<span class="glyphicon glyphicon-pencil"></span>
						  	</button>
							<button type="button" class="btn btn-default displaySectionVerticalButton ShowDetailViewerButton" id="ShowDetailViewerButton">
								<span id="PlusMinusGlyphicon" class="glyphicon glyphicon-plus"></span>
						  	</button>
					  	{% else %}

							<button type="button" class="btn btn-default displaySectionVerticalButton UserActionButton" name='action_description' value="GraveyardReanimate">
							  	<span class="glyphicon glyphicon-flash"></span>
						  	</button>
							<button type="button" class="btn btn-danger displaySectionVerticalButton UserActionButton" name='action_description' value='GraveyardDelete'>
								<span class="glyphicon glyphicon-trash"></span>
						  	</button>

					  	{% endif %} 
						</div>						
					</div>
					</form>
				</div>

				<div class="row hidden" id="ScoreDetail">
					<hr class="hr-1px-gray" style="margin-top:10px; margin-bottom:10px;">
								
					{% if ksu.ksu_subtype in ['KAS1', 'KAS2', 'KAS3', 'KAS4', 'ImPe', 'EVPo'] %}
					<div class="col-xs-3">
						<label> {{constants['d_SetViewerDetails'][ksu.ksu_subtype]['detailsLabel']}} </label>
						<select class="form-control kpts_value" name="kpts_value" id="kpts_value">
							{% for value in constants['l_Fibonacci'] %}
								{% if value == ksu.kpts_value %}
									<option selected="selected" value="{{value}}"> {{value}} </option>
								{% else %}
									<option value="{{value}}"> {{value}} </option>
								{% endif %}
							{% endfor %}
						</select>
					</div>
					{% endif %}

					{% if ksu.ksu_type == 'ImIn' %}
					<div class="col-xs-4">
						<label> Value right now </label>
						{% if ksu.ksu_subtype in ['BinaryPerception', 'FibonacciPerception'] %}
							<select class="form-control" name="indicator_value" id="select_indicator_value">
								{% if ksu.ksu_subtype == 'BinaryPerception' %}
									<option value="1"> Yes </option>
									<option value="0"> No </option>
								{% elif ksu.ksu_subtype == 'FibonacciPerception' %}
									<option value="1">1</option>
									<option value="2">2</option>
									<option selected="selected" value="3">3</option>
									<option value="5">5</option>
									<option value="8">8</option>
								{% endif %}
							</select>
						{% elif ksu.ksu_subtype == 'RealitySnapshot' %}
							<input type="number" min="0" class="form-control" style="padding-right:3px;" name="indicator_value" id="open_indicator_value" placeholder="0">
						{% endif %}
					</div>
					{% endif %}

					<div class="col-xs-5">
					{% if 'Record' in constants['d_SetViewerDetails'][ksu.ksu_subtype]['buttons'] %}
						<button type="button" class="btn btn-success btn-circle btn-lg UserActionButton ShowDetailViewerButton" name="action_description" value='ViewerRecordValue' style="margin-top:20px; margin-right:10px;"><span class="glyphicon glyphicon-record"></span></button>
					{% endif %}

					{% if 'Done' in constants['d_SetViewerDetails'][ksu.ksu_subtype]['buttons'] %}
						<button type="button" class="btn btn-success btn-circle btn-lg UserActionButton ShowDetailViewerButton" name="action_description" value='ViewerDone' style="margin-top:20px; margin-right:10px;"><span class="glyphicon glyphicon-ok"></span></button>
					{% endif %}

					{% if 'SendToMission' in constants['d_SetViewerDetails'][ksu.ksu_subtype]['buttons'] %}
						<button type="button" class="btn btn-primary btn-circle btn-lg UserActionButton ShowDetailViewerButton" name="action_description" value='SendToMission' style="margin-top:20px; margin-right:10px;"><span class="glyphicon glyphicon-share-alt"></span></button>
					{% endif %}

					{% if ksu.is_active %}
						<button type="button" class="btn btn-warning btn-circle btn-lg UserActionButton ShowDetailViewerButton" id="ViewerOnOffButton" name="action_description" value='ViewerOnOff' style="margin-top:20px; margin-right: 10px;"><span class="glyphicon glyphicon-off"></span></button>
					{% else %}
						<button type="button" class="btn btn-success btn-circle btn-lg UserActionButton ShowDetailViewerButton" id="ViewerOnOffButton"name="action_description" value='ViewerOnOff' style="margin-top:20px; margin-right: 10px;"><span class="glyphicon glyphicon-off"></span></button>
					{% endif %}

						<button type="button" class="btn btn-danger btn-circle btn-lg UserActionButton" name="action_description" value='ViewerDelete' style="margin-top:20px; margin-right: 10px;"><span class="glyphicon glyphicon-trash"></span></button>
					</div>

				</div>
	
			</div>
		</div>

	{% endfor %}
<!-- </div> -->

{% endblock %}



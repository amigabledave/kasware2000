{% extends "base.html" %}
{% block content %}

<!-- <div class="KSUdisplaySection"> -->
	<!-- Section title -->
	<div class="row">
		<div class="col-xs-12 col-sm-9 col-md-10 col-lg-10"> 
			<div class="SectionTitle"> {{constants['d_SetTitles'][set_name]}} </div>	
		</div>
	</div>

	{% for ksu in ksu_set %}

		<div class="row KSUdisplaySection" id="MissionKSU" value="{{ksu.key.id()}}" style="margin-top: 0px; padding-bottom:8px;">

			<div class="col-xs-12" style="padding-left:4px; padding-right:4px;">
				<div class="row" style="min-height: 45px">

					<div class="col-xs-11">

						<div class="row" font-size:14px;">
							<div class="col-xs-11 displaySectionDescription">
								<div>
								{% if ksu.ksu_subtype == 'KAS3' %}	
									<span style="color:blue; font-style:italic; font-weight:bold;"> If:</span> <span style="{% if ksu.is_critical %}color:red; font-weight:bold;{% endif %}">{{ksu.trigger_circumstances}}</span><span style="color:blue; font-style:italic; font-weight:bold;"> <br> Reaction:</span>
								{% endif %}

								{% if ksu.ksu_subtype == 'KAS4' %}	
									<span style="color:blue; font-style:italic; font-weight:bold;"> Must avoid:</span> 
								{% endif %}								

								<span style="{% if ksu.is_critical %}color:red;{% endif %}"> <b>{{ksu.description}}</b> </span>
								
								{% if ksu.ksu_type == 'ImIn' %}
									<br><span style="color:grey; font-style:italic; font-size:13px;">{{ksu.question}}</span> 
								{% endif %}

								{% if ksu.comments %} <br> <em> --- <span style="font-size:13px;">{{ksu.comments}} </span> --- </em>{% endif %}
								</div>
							</div>		
						</div>

						<div class="row">
							<br>
							<div class="col-xs-6">
								<label class="displaySectionBulletContent">{% if ksu.global_category != 'Unassigned' %}{{ksu.global_category}}{% else %}<br>{% endif %}
								<div class="displaySectionBulletContent"> {% if ksu.ksu_subtype %}{{constants['d_KsuSubtypes'][ksu.ksu_subtype]}}{% else %}{{constants['d_KsuTypes'][ksu.ksu_type]}}{% endif %}
								</div></label>
							</div>	

							{% for attr in constants['d_SetViewerDetails'][ksu.ksu_subtype]['attributes'] %}
								{% if ksu[attr] %}
								<div class="col-xs-{{constants['d_SetViewerDetails'][ksu.ksu_subtype]['columns'][attr]}}">
									<label class="displaySectionBulletContent"> {{constants['d_SetViewerDetails'][ksu.ksu_subtype]['fields'][attr]}}
									<div class="displaySectionBulletContent">
									{% if attr in constants['l_attributesThatNeedToBeFixed'] %}
										{{ constants['d_displayValues'][ksu[attr]]}}
									{% else %}
										{{ ksu[attr]}}
									{% endif %}	
									</div></label>
								</div>
								{% endif %}
							{% endfor %}
						</div>

								
					</div>
					<form method="post">
					<input type="text" class="form-control hidden" name="ksu_id" value="{{ksu.key.id()}}">

					<div class="col-xs-1">
						<div class="btn-group-vertical pull-right">
							<button type="submit" class="btn btn-default displaySectionVerticalButton" name='action_description' value="EditKSU">
							  	<span class="glyphicon glyphicon-pencil"></span>
						  	</button>
							<button type="button" class="btn btn-default displaySectionVerticalButton ShowDetailButton" id="ShowDetailButton">
								<span class="glyphicon glyphicon-plus"></span>
						  	</button> 
						</div>						
					</div>
					</form>
				</div>

				<div class="row hidden" id="ScoreDetail">
					<hr class="hr-1px-gray" style="margin-top:10px; margin-bottom:10px;">
								
						{% if ksu.ksu_subtype in ['KAS1', 'KAS2'] %}
							<div class="col-xs-2">
								<label> Duration </label>			
								<input type="number" min="1" class="form-control time_cost" id="time_cost" value="{% if ksu['time_cost']%}{{ksu['time_cost']}}{% else %}1{% endif %}" style="padding-left:8px; padding-right:3px;">
							</div>

							<div class="col-xs-2">
								<label>Intensity</label>
								<select class="form-control intensity" id="intensity" >
									{% for value in constants['l_Fibonacci_1_8'] %}
										{% if value == 3 %}
											<option selected="selected" value="{{value}}"> {{value}} </option>
										{% else %}
											<option value="{{value}}"> {{value}} </option>
										{% endif %}
									{% endfor %}
								</select>					
							</div>
						
						{% elif ksu.ksu_subtype == 'KAS3' %}
							<div class="col-xs-4">
								<label> Effort Reward</label>
								<select class="form-control" name="standard_reward">
									{% for value in constants['l_Fibonacci_8_55'] %}
										{% if value == ksu.standard_reward %}
											<option selected="selected" value="{{value}}"> {{value}} </option>
										{% else %}
											<option value="{{value}}"> {{value}} </option>
										{% endif %}
									{% endfor %}
								</select>	
							</div>


						{% elif ksu.ksu_subtype == 'KAS4' %}
							<div class="col-xs-4">
								<label> Stupidity Punishment</label>
								<select class="form-control" name="standard_punishment">
									{% for value in constants['l_Fibonacci_21_144'] %}
										{% if value == ksu.standard_punishment %}
											<option selected="selected" value="{{value}}"> {{value}} </option>
										{% else %}
											<option value="{{value}}"> {{value}} </option>
										{% endif %}
									{% endfor %}
								</select>	
							</div>



						{% endif %}



						<div class="col-xs-5">
						{% if 'Done' in constants['d_SetViewerDetails'][ksu.ksu_subtype]['buttons'] %}
							<button type="button" class="btn btn-success btn-circle btn-lg UserActionButton ShowDetailViewerButton" name="action_description" value='ViewerDone' style="margin-top:20px; margin-right:10px;"><span class="glyphicon glyphicon-ok"></span></button>
						{% endif %}

						{% if 'SendToMission' in constants['d_SetViewerDetails'][ksu.ksu_subtype]['buttons'] %}
							<button type="button" class="btn btn-primary btn-circle btn-lg UserActionButton" name="action_description" value='SendToMission' style="margin-top:20px; margin-right:10px;"><span class="glyphicon glyphicon-share-alt"></span></button>
						{% endif %}

						{% if 'PinInMission' in constants['d_SetViewerDetails'][ksu.ksu_subtype]['buttons'] %}
							<button type="button" class="btn btn-primary btn-circle btn-lg UserActionButton" name="action_description" value='SendToMission' style="margin-top:20px; margin-right:10px;"><span class="glyphicon glyphicon-pushpin"></span></button>
						{% endif %}	

							<button type="button" class="btn btn-danger btn-circle btn-lg UserActionButton" name="action_description" value='ViewerDelete' style="margin-top:20px; margin-right: 10px;"><span class="glyphicon glyphicon-trash"></span></button>
						</div>

				</div>
	
			</div>
		</div>

	{% endfor %}
<!-- </div> -->

{% endblock %}


